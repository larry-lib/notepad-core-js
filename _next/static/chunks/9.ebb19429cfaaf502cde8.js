(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{DQUF:function(e,t,n){"use strict";n.r(t),n.d(t,"notepadConnector",(function(){return F})),n.d(t,"NotepadConnectionState",(function(){return A})),n.d(t,"NotepadMode",(function(){return U}));var r=n("o0o1"),c=n.n(r),a=n("1OyB"),i=n("vuIU"),o=function(){function e(){Object(a.a)(this,e),this.events={}}return Object(i.a)(e,[{key:"addListener",value:function(e,t){var n=this;return"object"!==typeof this.events[e]&&(this.events[e]=[]),this.events[e].push(t),function(){return n.removeListener(e,t)}}},{key:"removeListener",value:function(e,t){if("object"===typeof this.events[e]){var n=this.events[e].indexOf(t);n>-1&&this.events[e].splice(n,1)}}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),c=1;c<n;c++)r[c-1]=arguments[c];"object"===typeof this.events[e]&&this.events[e].forEach((function(e){return e.apply(t,r)}))}}]),e}();function s(e,t){var n,r,a;return c.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=t.serviceId,r=t.characteristicId,i.next=3,c.a.awrap(e.getPrimaryService(n));case 3:return a=i.sent,i.next=6,c.a.awrap(a.getCharacteristic(r));case 6:return i.abrupt("return",i.sent);case 7:case"end":return i.stop()}}),null,null,null,Promise)}var u=function(){function e(){Object(a.a)(this,e),this._inputValueEmitter=new o}return Object(i.a)(e,[{key:"requestDevice",value:function(e){return navigator.bluetooth.requestDevice({optionalServices:e.optionalServices,acceptAllDevices:!0})}},{key:"startScan",value:function(){throw new Error("Unsupported")}},{key:"stopScan",value:function(){throw new Error("Unsupported")}},{key:"connect",value:function(e){return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return console.info("NotepadCore connect"),t.prev=1,t.next=4,c.a.awrap(e.gatt.connect());case 4:this._connectGatt=t.sent,console.debug("onConnectSuccess",this._connectGatt),this._connectGatt.device.addEventListener("gattserverdisconnected",this._handleDisconnectEvent.bind(this)),this.messageHandler&&this.messageHandler({name:"connectionState",connectionState:{connected:!0}}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.debug("onConnectFail",t.t0),this.messageHandler&&this.messageHandler({name:"connectionState",connectionState:{connected:!1}});case 14:case"end":return t.stop()}}),null,this,[[1,10]],Promise)}},{key:"disconnect",value:function(){console.info("NotepadCore disconnect"),this._connectGatt&&(this._connectGatt.device&&this._connectGatt.device.removeEventListener("gattserverdisconnected",this._handleDisconnectEvent),this._connectGatt.disconnect()),this._connectGatt=null}},{key:"_handleDisconnectEvent",value:function(e){console.debug("_handleDisconnectEvent",e.target.hashCode),this._connectGatt&&this._connectGatt.device&&this._connectGatt.device.removeEventListener("gattserverdisconnected",this._handleDisconnectEvent),this._connectGatt=null,this.messageHandler&&this.messageHandler({name:"connectionState",connectionState:{connected:!1}})}},{key:"setNotifiable",value:function(e,t){var n,r,a;return c.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.serviceId,r=e.characteristicId,i.next=3,c.a.awrap(s(this._connectGatt,{serviceId:n,characteristicId:r}));case 3:a=i.sent,t?(a.startNotifications(),a.addEventListener("characteristicvaluechanged",this._onCharacteristicValueChange.bind(this))):(a.stopNotifications(),a.removeEventListener("characteristicvaluechanged",this._onCharacteristicValueChange));case 5:case"end":return i.stop()}}),null,this,null,Promise)}},{key:"requestMtu",value:function(e){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",104);case 1:case"end":return e.stop()}}),null,null,null,Promise)}},{key:"readValue",value:function(e){var t,n;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.serviceId,n=e.characteristicId,r.next=3,c.a.awrap(s(this._connectGatt,{serviceId:t,characteristicId:n}));case 3:r.sent.readValue();case 5:case"end":return r.stop()}}),null,this,null,Promise)}},{key:"writeValue",value:function(e,t){var n,r,a;return c.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.serviceId,r=e.characteristicId,i.next=3,c.a.awrap(s(this._connectGatt,{serviceId:n,characteristicId:r}));case 3:return a=i.sent,i.next=6,c.a.awrap(a.writeValue(t));case 6:case"end":return i.stop()}}),null,this,null,Promise)}},{key:"_onCharacteristicValueChange",value:function(e){var t=e.target,n=new Uint8Array(t.value.buffer);console.debug("_onCharacteristicValueChange ".concat(t.uuid,", ").concat(n)),this._inputValueEmitter.emit(t.uuid,n)}},{key:"inputValueEmitter",get:function(){return this._inputValueEmitter}}]),e}();function l(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c,a=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,c=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw c}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(){function e(){Object(a.a)(this,e),wx.onBluetoothDeviceFound(this._onBluetoothDeviceFound.bind(this)),wx.onBLEConnectionStateChange(this._onBLEConnectionStateChange.bind(this)),wx.onBLECharacteristicValueChange(this._onBLECharacteristicValueChange.bind(this)),wx.pro.openBluetoothAdapter(),this._inputValueEmitter=new o}return Object(i.a)(e,[{key:"requestDevice",value:function(e){throw new Error("Unsupported")}},{key:"startScan",value:function(){var e,t,n;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return console.info("NotepadCore startScan"),r.next=3,c.a.awrap(wx.pro.getBluetoothAdapterState());case 3:e=r.sent,t=e.available,n=e.discovering,t&&!n&&wx.pro.startBluetoothDevicesDiscovery();case 7:case"end":return r.stop()}}),null,null,null,Promise)}},{key:"stopScan",value:function(){console.info("NotepadCore stopScan"),wx.pro.stopBluetoothDevicesDiscovery()}},{key:"_onBluetoothDeviceFound",value:function(e){var t=e.devices;if(console.debug("onBluetoothDeviceFound ".concat(t.length)),this.messageHandler){var n,r=l(t);try{for(r.s();!(n=r.n()).done;){var c=n.value,a=c.name,i=c.deviceId,o=c.advertisData,s=c.RSSI,u=new Uint8Array(o);this.messageHandler({name:"scanResult",scanResult:{name:a,deviceId:i,manufacturerData:u,RSSI:s}})}}catch(h){r.e(h)}finally{r.f()}}}},{key:"connect",value:function(e){return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return console.info("NotepadCore connect"),this._deviceId=e.deviceId,t.next=4,c.a.awrap(wx.pro.createBLEConnection({deviceId:this._deviceId}));case 4:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"disconnect",value:function(){console.info("NotepadCore disconnect"),wx.pro.closeBLEConnection({deviceId:this._deviceId}),this._deviceId=null}},{key:"_onBLEConnectionStateChange",value:function(e){var t=e.deviceId,n=e.connected;console.debug("onBLEConnectionStateChange ".concat(t,", ").concat(n)),n?this._discoverServices():this.messageHandler&&this.messageHandler({name:"connectionState",connectionState:{connected:!1}})}},{key:"_discoverServices",value:function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.awrap(wx.pro.getBLEDeviceServices({deviceId:this._deviceId}));case 2:this.messageHandler&&this.messageHandler({name:"connectionState",connectionState:{connected:!0}});case 3:case"end":return e.stop()}}),null,this,null,Promise)}},{key:"setNotifiable",value:function(e,t){var n=e.serviceId,r=e.characteristicId;return wx.pro.notifyBLECharacteristicValueChange({deviceId:this._deviceId,serviceId:n,characteristicId:r,state:t})}},{key:"requestMtu",value:function(e){return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.awrap(wx.pro.setBLEMTU(e));case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}),null,null,null,Promise)}},{key:"readValue",value:function(e){var t=e.serviceId,n=e.characteristicId;return wx.pro.readBLECharacteristicValue({deviceId:this._deviceId,serviceId:t,characteristicId:n})}},{key:"writeValue",value:function(e,t){var n,r;return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.serviceId,r=e.characteristicId,a.next=3,c.a.awrap(wx.pro.writeBLECharacteristicValue({deviceId:this._deviceId,serviceId:n,characteristicId:r,value:t.buffer}));case 3:case"end":return a.stop()}}),null,this,null,Promise)}},{key:"_onBLECharacteristicValueChange",value:function(e){var t=e.characteristicId,n=e.value,r=new Uint8Array(n);console.debug("onBLECharacteristicValueChange ".concat(t," ").concat(r)),this._inputValueEmitter.emit(t.toLowerCase(),r)}},{key:"inputValueEmitter",get:function(){return this._inputValueEmitter}}]),e}(),f=window&&window.navigator?new u:new d;function v(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var p=n("Ji7U"),y=n("md7G"),m=n("foSv"),w=function e(t,n,r){Object(a.a)(this,e),this.request=t,this.intercept=n,this.handle=r};function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(m.a)(e);if(t){var c=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return Object(y.a)(this,n)}}var b=new Uint8Array([87,68,77]),g="ba5e-f4ee-5ca1-eb1e5e4b1ce0",_="57444d01-".concat(g),S="57444e02-".concat(g),k=S,x="57444d06-".concat(g),I="57444d07-".concat(g),E=function(e){return function(t){return 7===t[0]&&t[1]===e[0]}},R=function(e){if(0!==e[4])throw new Error("WOODEMI_COMMAND fail: response ".concat(e))},O=function(e){Object(p.a)(n,e);var t=C(n);function n(e,r,c){return Object(a.a)(this,n),t.call(this,e,r||E(e),c||R)}return n}(w);function j(e,t,n){return(j="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(m.a)(e)););return e}(e,t);if(r){var c=Object.getOwnPropertyDescriptor(r,t);return c.get?c.get.call(n):c.value}})(e,t,n||e)}var D=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,[{key:"completeConnection",value:function(e){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:this._notepadType.receiveSyncInput(function(e){this._syncPointerReceiver&&this._syncPointerReceiver(this._parseSyncData(e))}.bind(this));case 1:case"end":return e.stop()}}),null,this,null,Promise)}},{key:"setMode",value:function(e){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Unimplemented");case 1:case"end":return e.stop()}}),null,null,null,Promise)}},{key:"_parseSyncData",value:function(e){throw new Error("Unimplemented")}},{key:"onSyncPointerReceive",value:function(e){this._syncPointerReceiver=e}},{key:"offSyncPointerReceive",value:function(e){this._syncPointerReceiver=null}},{key:"commandRequestCharacteristic",get:function(){throw new Error("Unimplemented")}},{key:"commandResponseCharacteristic",get:function(){throw new Error("Unimplemented")}},{key:"inputIndicationCharacteristics",get:function(){throw new Error("Unimplemented")}},{key:"inputNotificationCharacteristics",get:function(){throw new Error("Unimplemented")}}]),e}(),A=Object.freeze({Disconnected:Symbol("Disconnected"),Connecting:Symbol("Connecting"),AwaitConfirm:Symbol("AwaitConfirm"),Connected:Symbol("Connected")}),U=Object.freeze({Sync:Symbol("Sync"),Common:Symbol("Common")}),P=function e(t,n,r,c){Object(a.a)(this,e),this.x=t,this.y=n,this.t=r,this.p=c},V=Object.freeze({Denied:Symbol("Denied"),Confirmed:Symbol("Confirmed"),Unconfirmed:Symbol("Unconfirmed"),Approved:Symbol("Approved")}),L=Object.freeze({Denied:new Error("Notepad claimed by other user"),Unconfirmed:new Error("User does not confirm before timeout")});function N(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(m.a)(e);if(t){var c=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return Object(y.a)(this,n)}}var B=[_,x],H=function(e){Object(p.a)(n,e);var t=N(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"completeConnection",value:function(e){var t;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.a.awrap(this._checkAccess(e));case 2:t=r.sent,r.t0=t,r.next=r.t0===V.Denied?6:r.t0===V.Unconfirmed?7:8;break;case 6:throw L.Denied;case 7:throw L.Unconfirmed;case 8:j(Object(m.a)(n.prototype),"completeConnection",this).call(this,e);case 9:case"end":return r.stop()}}),null,this,null,Promise)}},{key:"_checkAccess",value:function(e){var t,n;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.a.awrap(this._notepadType.executeCommand(new O(Uint8Array.of(1,10,0,0,0,1),(function(e){return 2===e[0]}),(function(e){return e[1]}))));case 2:t=r.sent,r.t0=t,r.next=0===r.t0?6:1===r.t0?7:2===r.t0?12:13;break;case 6:return r.abrupt("return",V.Denied);case 7:return e(!0),r.next=10,c.a.awrap(this._notepadType.receiveResponseAsync("Confirm",this.commandResponseCharacteristic,(function(e){return 3===e[0]})));case 10:return n=r.sent,r.abrupt("return",0===n[1]?V.Confirmed:V.Unconfirmed);case 12:return r.abrupt("return",V.Approved);case 13:throw new Error("Unknown error");case 14:case"end":return r.stop()}}),null,this,null,Promise)}},{key:"setMode",value:function(e){var t;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e===U.Sync?0:1,n.next=3,c.a.awrap(this._notepadType.executeCommand(new O(Uint8Array.of(5,t))));case 3:case"end":return n.stop()}}),null,this,null,Promise)}},{key:"_parseSyncData",value:function(e){return function(e){var t=new DataView(e.buffer);return Array.from({length:e.length/6},(function(e,n){return new P(t.getUint16(6*n,!0),t.getUint16(6*n+2,!0),-1,t.getUint16(6*n+4,!0))}))}(e).filter((function(e){return 0<=e.x&&e.x<=14800&&0<=e.y&&e.y<=21e3}))}},{key:"commandRequestCharacteristic",get:function(){return{serviceId:_,characteristicId:S}}},{key:"commandResponseCharacteristic",get:function(){return{serviceId:_,characteristicId:k}}},{key:"syncInputCharacteristic",get:function(){return{serviceId:x,characteristicId:I}}},{key:"inputIndicationCharacteristics",get:function(){return[this.commandResponseCharacteristic]}},{key:"inputNotificationCharacteristics",get:function(){return[this.syncInputCharacteristic]}}]),n}(D);Uint8Array.prototype.startWith=function(e){if(this.length<e.length)return!1;for(var t in e)if(this[t]!=e[t])return!1;return!0};var G=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,null,[{key:"support",value:function(e){return e.manufacturerData.startWith(b)}},{key:"create",value:function(e){return new H}},{key:"optionalServiceCollection",get:function(){return v(B)}}]),e}();function q(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c,a=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,c=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw c}}}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var T=function(){function e(t){Object(a.a)(this,e),this._notepadClient=t,t._notepadType=this}return Object(i.a)(e,[{key:"configCharacteristics",value:function(){var e,t,n,r,a,i;return c.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:e=q(this._notepadClient.inputIndicationCharacteristics),o.prev=1,e.s();case 3:if((t=e.n()).done){o.next=9;break}return n=t.value,o.next=7,c.a.awrap(f.setNotifiable(n,!0));case 7:o.next=3;break;case 9:o.next=14;break;case 11:o.prev=11,o.t0=o.catch(1),e.e(o.t0);case 14:return o.prev=14,e.f(),o.finish(14);case 17:r=q(this._notepadClient.inputNotificationCharacteristics),o.prev=18,r.s();case 20:if((a=r.n()).done){o.next=26;break}return i=a.value,o.next=24,c.a.awrap(f.setNotifiable(i,!0));case 24:o.next=20;break;case 26:o.next=31;break;case 28:o.prev=28,o.t1=o.catch(18),r.e(o.t1);case 31:return o.prev=31,r.f(),o.finish(31);case 34:case"end":return o.stop()}}),null,this,[[1,11,14,17],[18,28,31,34]],Promise)}},{key:"sendRequestAsync",value:function(e,t,n){return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.a.awrap(f.writeValue(t,n));case 2:console.log("on".concat(e,"Send: ").concat(n));case 3:case"end":return r.stop()}}),null,null,null,Promise)}},{key:"receiveResponseAsync",value:function(e,t,n){t.serviceId;var r=t.characteristicId;return new Promise((function(t,c){f.inputValueEmitter.addListener(r,(function c(a){n(a)&&(f.inputValueEmitter.removeListener(r,c),console.log("on".concat(e,"Receive: ").concat(r," ").concat(a)),t(a))}))}))}},{key:"executeCommand",value:function(e){var t;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.a.awrap(this.sendRequestAsync("Command",this._notepadClient.commandRequestCharacteristic,e.request));case 2:return n.next=4,c.a.awrap(this.receiveResponseAsync("Command",this._notepadClient.commandResponseCharacteristic,e.intercept));case 4:return t=n.sent,n.abrupt("return",e.handle(t));case 6:case"end":return n.stop()}}),null,this,null,Promise)}},{key:"receiveSyncInput",value:function(e){var t=this._notepadClient.syncInputCharacteristic,n=(t.serviceId,t.characteristicId);f.inputValueEmitter.addListener(n,e)}}]),e}(),F=new(function(){function e(){Object(a.a)(this,e),f.messageHandler=this._handleMessage.bind(this)}return Object(i.a)(e,[{key:"requestDevice",value:function(){return console.info("NotepadConnector requestDevice"),f.requestDevice({optionalServices:G.optionalServiceCollection})}},{key:"startScan",value:function(){console.info("NotepadConnector startScan"),f.startScan()}},{key:"stopScan",value:function(){console.info("NotepadConnector stopScan"),f.stopScan()}},{key:"onScanResult",value:function(e){this._scanResultReceiver=e}},{key:"offScanResult",value:function(e){this._scanResultReceiver=null}},{key:"connect",value:function(e,t){console.info("NotepadConnector connect"),this._notepadClient=G.create(e),this._notepadType=new T(this._notepadClient),f.connect(e),this._connectionChangeHandler&&this._connectionChangeHandler(this._notepadClient,A.Connecting)}},{key:"disconnect",value:function(){console.info("NotepadConnector disconnect"),this._clean(),f.disconnect()}},{key:"_handleMessage",value:function(e){console.debug("NotepadConnector _handleMessage",e),"scanResult"===e.name?G.support(e.scanResult)&&this._scanResultReceiver&&this._scanResultReceiver(e.scanResult):"connectionState"===e.name&&this._handleConnectionState(e.connectionState)}},{key:"onConnectionChange",value:function(e){this._connectionChangeHandler=e}},{key:"offConnectionChange",value:function(e){this._connectionChangeHandler=null}},{key:"_handleConnectionState",value:function(e){var t=this;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.connected){n.next=15;break}return n.prev=2,n.next=5,c.a.awrap(this._notepadType.configCharacteristics());case 5:return n.next=7,c.a.awrap(this._notepadClient.completeConnection((function(e){t._connectionChangeHandler&&t._connectionChangeHandler(t._notepadClient,A.AwaitConfirm)})));case 7:this._connectionChangeHandler&&this._connectionChangeHandler(this._notepadClient,A.Connected),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),this._clean();case 13:n.next=17;break;case 15:this._clean(),this._connectionChangeHandler&&this._connectionChangeHandler(this._notepadClient,A.Disconnected);case 17:case"end":return n.stop()}}),null,this,[[2,10]],Promise)}},{key:"_clean",value:function(){this._notepadClient=null,this._notepadType=null}}]),e}())}}]);